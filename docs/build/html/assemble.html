
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>assemble module &#8212; aligned-hierarchies 1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-assemble">
<span id="assemble-module"></span><h1>assemble module<a class="headerlink" href="#module-assemble" title="Permalink to this headline">¶</a></h1>
<p>assemble.py</p>
<p>This script finds and forms the essential structure components, which are the
smallest building blocks that form every repeat in the song.</p>
<p>These functions ensure each time step of a song is contained in at most one
of the song’s essential structure component by ensuring there are no overlapping
repeats in time. When repeats do overlap, they undergo a process where they
are divided until there are only non-overlapping pieces left over.</p>
<blockquote>
<div><ul class="simple">
<li><p>breakup_overlaps_by_intersect - Extracts repeats in input_pattern_obj that</p></li>
</ul>
<p>has the starting indices of the repeats, into the essential structure
componets using bw_vec, that has the lengths of each repeat.</p>
<ul class="simple">
<li><p>check_overlaps - Compares every pair of groups, determining if there are</p></li>
</ul>
<p>any repeats in any pairs of the groups that overlap.</p>
<ul class="simple">
<li><p>__compare_and_cut - Compares two rows of repeats labeled RED and BLUE, and</p></li>
</ul>
<p>determines if there are any overlaps in time between them. If there are overlaps,
we cut the repeats in RED and BLUE into up to 3 pieces.</p>
<ul class="simple">
<li><p>__num_of_parts - Determines the number of blocks of consecutive time</p></li>
</ul>
<p>steps in a list of time steps. A block of consecutive time steps represents
a distilled section of a repeat.</p>
<ul class="simple">
<li><p>__inds_to_rows -  Expands a vector containing the starting indices of a</p></li>
</ul>
<p>piece or two of a repeat into a matrix representation recording when these
pieces occur in the song with 1’s. All remaining entries are marked with
0’s.</p>
<ul class="simple">
<li><p>__merge_based_on_length - Merges repeats that are the same length, as set</p></li>
</ul>
<p>by full_bandwidth, and are repeats of the same piece of structure.</p>
<ul class="simple">
<li><p>__merge_rows - Merges rows that have at least one common repeat. These</p></li>
</ul>
<p>common repeat(s) must occur at the same time step and be of a common length.</p>
<ul class="simple">
<li><p>hierarchical_structure - Distills the repeats encoded in MATRIX_NO</p></li>
</ul>
<p>(and KEY_NO) to the essential structure components and then builds the
hierarchical representation. Optionally outputs visualizations of the
hierarchical representations.</p>
</div></blockquote>
<dl class="function">
<dt id="assemble.breakup_overlaps_by_intersect">
<code class="sig-prename descclassname">assemble.</code><code class="sig-name descname">breakup_overlaps_by_intersect</code><span class="sig-paren">(</span><em class="sig-param">input_pattern_obj</em>, <em class="sig-param">bw_vec</em>, <em class="sig-param">thresh_bw</em><span class="sig-paren">)</span><a class="headerlink" href="#assemble.breakup_overlaps_by_intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract repeats in input_pattern_obj that has the starting indices of the
repeats, into the essential structure componets using bw_vec, that has the
lengths of each repeat. The essential structure components are the
smallest building blocks that form every repeat in the song.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_pattern_obj</strong> (<em>np.array</em>) – binary matrix with 1’s where repeats begin
and 0’s otherwise</p></li>
<li><p><strong>bw_vec</strong> (<em>np.array</em>) – vector containing the lengths of the repeats
encoded in input_pattern_obj</p></li>
<li><p><strong>thresh_bw</strong> (<em>number</em>) – the smallest allowable repeat length</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pattern_no_overlaps</strong> (<em>np.array</em>) – binary matrix with 1’s where repeats of
essential structure components begin</p></li>
<li><p><strong>pattern_no_overlaps_key</strong> (<em>np.array</em>) – vector containing the lengths of the repeats
of essential structure components in
pattern_no_overlaps</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="assemble.check_overlaps">
<code class="sig-prename descclassname">assemble.</code><code class="sig-name descname">check_overlaps</code><span class="sig-paren">(</span><em class="sig-param">input_mat</em><span class="sig-paren">)</span><a class="headerlink" href="#assemble.check_overlaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares every pair of groups, determining if there are any repeats in
any pairs of the groups that overlap.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_mat</strong> (<em>np.array</em><em>(</em><em>int</em><em>)</em>) – matrix to be checked for overlaps</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>overlaps_yn</strong> – logical array where (i,j) = 1 if row i of input matrix and row j
of input matrix overlap and (i,j) = 0 elsewhere</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array(bool)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="assemble.hierarchical_structure">
<code class="sig-prename descclassname">assemble.</code><code class="sig-name descname">hierarchical_structure</code><span class="sig-paren">(</span><em class="sig-param">matrix_no</em>, <em class="sig-param">key_no</em>, <em class="sig-param">sn</em>, <em class="sig-param">vis=False</em><span class="sig-paren">)</span><a class="headerlink" href="#assemble.hierarchical_structure" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Distills the repeats encoded in matrix_no (and key_no) to the essential
structure components and then builds the hierarchical representation.
Optionally shows visualizations of the hierarchical structure via the vis argument.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrix_no</strong> (<em>np.array</em><em>[</em><em>int</em><em>]</em>) – binary matrix with 1’s where repeats begin and 0’s
otherwise</p></li>
<li><p><strong>key_no</strong> (<em>np.array</em><em>[</em><em>int</em><em>]</em>) – vector containing the lengths of the repeats encoded in matrix_NO</p></li>
<li><p><strong>sn</strong> (<em>int</em>) – song length, which is the number of audio shingles</p></li>
<li><p><strong>vis</strong> (<em>bool</em>) – shows visualizations if True (default = False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>full_visualization</strong> (<em>np.array[int]</em>) – binary matrix representation for
full_matrix_NO with blocks of 1’s equal to
the length’s prescribed in full_key</p></li>
<li><p><strong>full_key</strong> (<em>np.array[int]</em>) – vector containing the lengths of the hierarchical
structure encoded in full_matrix_NO</p></li>
<li><p><strong>full_matrix_NO</strong> (<em>np.array[int]</em>) – binary matrix with 1’s where hierarchical
structure begins and 0’s otherwise</p></li>
<li><p><strong>full_anno_lst</strong> (<em>np.array[int]</em>) – vector containing the annotation markers of the
hierarchical structure encoded in each row of
full_matrix_NO</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">aligned-hierarchies</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Katherine M Kinnaird, Eleanor Donaher, Lizette Carpenter, Jordan Moody, Denise Nava.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/assemble.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>